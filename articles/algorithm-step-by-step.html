<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="standardlastprofile">
<title>Generate a standardized load profile • standardlastprofile</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a standardized load profile">
<meta property="og:description" content="standardlastprofile">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">standardlastprofile</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/algorithm-step-by-step.html">Generate a standardized load profile</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/flrd/standardlastprofile/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate a standardized load profile</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/flrd/standardlastprofile/blob/HEAD/vignettes/algorithm-step-by-step.Rmd" class="external-link"><code>vignettes/algorithm-step-by-step.Rmd</code></a></small>
      <div class="d-none name"><code>algorithm-step-by-step.Rmd</code></div>
    </div>

    
    
<p>The goal of this vignette is to show step by step how the algorithm
of the function <code>get_load_profiles()</code> works. The data in the
<code>load_profiles</code> data-set forms the basis for all subsequent
steps. There are 96 values for each combination of profile, period and
day. These are 1/4-hour measurements and represent a standardized load
profile (German: “Standardlastprofile”). This data was derived in 1999
on the basis of 1,209 load profiles and data from low-voltage
customers<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;More detail on the methodology can be found &lt;a href="https://www.bdew.de/media/documents/1999_Repraesentative-VDEW-Lastprofile.pdf" class="external-link"&gt;here&lt;/a&gt;.&lt;/p&gt;'><sup>1</sup></a>.</p>
<p>Those 96 values in watts for each day are normalized to an annual
consumption of 1.000 kWh. So if we sum up all the quarter-hour
consumption values for a year, the result is (approximately) 1,000
kWh/a.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flrd/standardlastprofile" class="external-link">standardlastprofile</a></span><span class="op">)</span></span>
<span><span class="va">H0_2023</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_load_profile.html">get_load_profile</a></span><span class="op">(</span></span>
<span>  <span class="st">"H0"</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2024-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2024-12-31"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">H0_2023</span><span class="op">$</span><span class="va">watts</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">prettyNum</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "4,008,335"</span></span></code></pre></div>
<p>“Hold on - didn’t you just say 1,000?!”, you might be thinking. Yes
you are correct, we must <a href="https://en.wikipedia.org/wiki/Watt#Distinction_between_watts_and_watt-hours" class="external-link">convert
power units into energy units</a>. The values returned are 1/4h
measurements in watts. To convert the values to watt-hours, we must
hence divide them by 4; and since one watt-hour is equal to 1/1000
kilowatt-hour, we divide also by 1,000:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">H0_2023</span><span class="op">$</span><span class="va">watts</span> <span class="op">/</span> <span class="fl">4</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">prettyNum</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1,002.084"</span></span></code></pre></div>
<div class="section level2">
<h2 id="algorithm-step-by-step">Algorithm step by step<a class="anchor" aria-label="anchor" href="#algorithm-step-by-step"></a>
</h2>
<p>When you call <code>get_load_profiles()</code> to generate a load
profile these steps are performed:</p>
<ol style="list-style-type: decimal">
<li><p>Generate a date sequence from <code>start_date</code> to
<code>end_date</code></p></li>
<li><p>Map each day to combination of <code>day</code> and
<code>period</code></p></li>
<li><p>Use result from 2nd step to extract values from
<code>load_profiles</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;That is actually a lie. There is an internal data object
called from which the data is extracted for effiecency.&lt;/p&gt;"><sup>2</sup></a></p></li>
<li><p>Apply polynomial function to values of profile H0</p></li>
<li><p>Return data<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;More detail on the algorithm can be found &lt;a href="https://www.bdew.de/media/documents/2000131_Anwendung-repraesentativen_Lastprofile-Step-by-step.pdf" class="external-link"&gt;here&lt;/a&gt;.&lt;/p&gt;'><sup>3</sup></a></p></li>
</ol>
<div class="section level3">
<h3 id="generate-a-date-sequence">Generate a date sequence<a class="anchor" aria-label="anchor" href="#generate-a-date-sequence"></a>
</h3>
<p>In the very first step a date sequence is created from
<code>start_date</code> to <code>end_date</code> based on the user
input. Here is a simple example; the result is a vector of class
Date:</p>
<pre><code><span><span class="co">#&gt; [1] "2023-12-22" "2023-12-23" "2023-12-24" "2023-12-25" "2023-12-26"</span></span>
<span><span class="co">#&gt; [6] "2023-12-27"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="map-each-day-to-a-period-and-a-weekday">Map each day to a period and a weekday<a class="anchor" aria-label="anchor" href="#map-each-day-to-a-period-and-a-weekday"></a>
</h3>
<p>When analyzing the 1,209 load profiles, the study found that
consumption varies both over the course of the year and over the days
within a week. However, it was also found that there was no significant
difference in consumption between Monday and Friday for each group. For
this reason, the days Monday to Friday are grouped together as
‘workdays’.</p>
<p>December 24th and 31th are considered a Saturday too, if they are not
a Sunday, and public holidays are set to a Sunday. The package supports
nationwide, public holidays for Germany only. Those were retrieved from
the <a href="https://github.com/nager/Nager.Date" class="external-link">nager.Date API</a> and
are listed below for 2024:</p>
<ul>
<li>Jan 1: New Year’s</li>
<li>Mar 29: Good Friday</li>
<li>Apr 1: Easter Monday</li>
<li>May 1: Labor Day</li>
<li>May 9: Ascension Day</li>
<li>May 20: Whit Monday</li>
<li>Oct 3: German Unity Day</li>
<li>Dec 25: Christmas Day:</li>
<li>Dec 26: Boxing Day</li>
</ul>
<p>The 3 periods are defined as:</p>
<ul>
<li>
<code>summer</code>: May 15 to September 14</li>
<li>
<code>winter</code>: November 1 to March 20</li>
<li>
<code>transition</code>: March 21 to May 14, and September 15 to
October 31</li>
</ul>
<p>The result of this second step is a mapping from each date to a
so-called characteristic profile day, i.e. a combination of weekday and
period:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wkday_period</span> <span class="op">&lt;-</span> <span class="fu">standardlastprofile</span><span class="fu">:::</span><span class="fu">get_wkday_period</span><span class="op">(</span><span class="va">date_seq</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="va">date_seq</span>, day <span class="op">=</span> <span class="va">wkday_period</span><span class="op">)</span></span>
<span><span class="co">#&gt;         date             day</span></span>
<span><span class="co">#&gt; 1 2023-12-22  workday_winter</span></span>
<span><span class="co">#&gt; 2 2023-12-23 saturday_winter</span></span>
<span><span class="co">#&gt; 3 2023-12-24   sunday_winter</span></span>
<span><span class="co">#&gt; 4 2023-12-25   sunday_winter</span></span>
<span><span class="co">#&gt; 5 2023-12-26   sunday_winter</span></span>
<span><span class="co">#&gt; 6 2023-12-27  workday_winter</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assign-consumption-values-to-each-day">Assign consumption values to each day<a class="anchor" aria-label="anchor" href="#assign-consumption-values-to-each-day"></a>
</h3>
<p>The obvious next step is to assign the 1/4-hour power values
contained in the <code>load_profiles</code> data set to each
characteristic profile day created in the previous step. This is the job
of the <code>get_load_profiles()</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">G5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_load_profile.html">get_load_profile</a></span><span class="op">(</span>profile <span class="op">=</span> <span class="st">"G5"</span>,</span>
<span>                       start_date <span class="op">=</span> <span class="va">start_date</span>, <span class="co"># defined above</span></span>
<span>                       end_date <span class="op">=</span> <span class="va">end_date</span><span class="op">)</span></span></code></pre></div>
<p>The analysis of the data showed that the load fluctuations for
commercial and agricultural customers are moderate and can therefore be
easily mapped using workday, Saturday and Sunday profiles in three
annual periods. This method produces the annual load profile for
customers/customer groups <code>G0</code> to <code>G6</code> and
<code>L0</code> to <code>L2</code>, and it is referred to in the study
as the ‘static load profile’, as it can be determined directly from the
3x3 characteristic profile days.</p>
<p>Here is the code to reproduce the plot for profile <code>G5</code>
from the <a href="https://github.com/flrd/standardlastprofile#generate-a-load-profile" class="external-link">README</a>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">G5</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">start_time</span>, <span class="va">watts</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#0CC792"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_datetime</a></span><span class="op">(</span></span>
<span>    date_breaks <span class="op">=</span> <span class="st">"1 day"</span>,</span>
<span>    date_labels <span class="op">=</span> <span class="st">"%b %d"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Profile 'G5': bakery with bakehouse"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"1/4h-measurements, based on consumption of 1.000 kWh/a"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"data: www.bdew.de"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"[watts]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>      panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      panel.grid.minor.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="cn">NULL</span></span></code></pre></div>
<p><img src="algorithm-step-by-step_files/figure-html/G5_plot_vignette-1.png" alt="Line plot of the standardized load profile 'G5' (Bakery with a bakehouse) from December 22nd to December 27th 2023; values are normalized to an annual consumption of 1,000kWh per annum." width="700"></p>
</div>
<div class="section level3">
<h3 id="generate-a-dynamic-load-profile-h0">Generate a dynamic load profile H0<a class="anchor" aria-label="anchor" href="#generate-a-dynamic-load-profile-h0"></a>
</h3>
<p>In contrast to most commercial and agricultural businesses, which
have a relatively even and a fairly constant power consumption over the
course of a year, households on the other hand have a continuously
decreasing load from winter to summer (in Germany at least). This fact
is taken into account when you call <code><a href="../reference/get_load_profile.html">get_load_profile()</a></code> by
applying a 4th order polynomial function to the values of profile
<code>H0</code>:</p>
<p><span class="math display">\[
x = x_0 (-3.92e^{-10} \times d^4 + 3.20^{-7} \times  d^3 - 7.02^{-5}
\times d^2 + 2.10^{-3} \times d + 1.24)
\]</span> Where:</p>
<ul>
<li>
<span class="math inline">\(x\)</span> is the resulting ‘dynamic’
quarter-hour value</li>
<li>
<span class="math inline">\(x_0\)</span> is the static
quarter-hourly value of the profile</li>
<li>
<span class="math inline">\(d\)</span> is the day of the respective
year, starting at 1 on January 1st</li>
</ul>
<p>Hence for household customers, things look a little different, at
least under the hood, as can be seen in the following graphic. It shows
the aggregated daily values for 2023 created at the beginning of this
vignette:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_load_profile.html">get_load_profile</a></span><span class="op">(</span>profile <span class="op">=</span> <span class="st">"H0"</span>,</span>
<span>                 start_date <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span>
<span>                 end_date <span class="op">=</span> <span class="st">"2023-12-31"</span><span class="op">)</span></span></code></pre></div>
<p><img src="algorithm-step-by-step_files/figure-html/H0_2023_plot-1.png" alt="Line plot a standardized load profile 'H0' (households) aggreagted by day from January 1st to December 31st, 2023. The plot shows that households have a continuously decreasing load from winter to summer and vice versa." width="700"></p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Markus Döring.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
